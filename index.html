<!DOCTYPE html>
<!-- saved from url=(0059)http://mosampaio-samples.appspot.com/jogoDaVelha/index.html -->
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
	    <meta charset="utf-8"> 
	    <script src="http://localhost:1337/socket.io/socket.io.js"></script>
		<script src="./prototype.js" type="text/javascript"></script>
		<script src="./gameinterface.js" type="text/javascript"></script>
		<script type="text/javascript">
			// socket.emit('checklogged', {user: 'none'});

			socket.on('loadplayerlist', function(data) {
				list = data.playerlist;
				el = document.getElementById('playerlist');
				el.innerHTML = '';
				list.each(function(i,e) {
					player = document.createElement('p');
					a = document.createElement('a');
					a.setAttribute('href', '/tictactoe/jogo.html?playwith=' + i._id);
					a.setAttribute('title', 'Clique para jogar com este usuário');
					a.innerHTML = i.username;
					player.setAttribute('rel', i._id);
					player.appendChild(a);
					el.appendChild(player);
				});
			});

			socket.on('isLogged', function(data) {
				document.getElementById('loginform').setAttribute('style', 'display:none');
				document.getElementById('players').setAttribute('style', 'display:block');
			});

			function login() {
				socket.emit('login', {
					username: document.getElementById('username').value, 
					password: document.getElementById('password').value
				});
			};

			window.setInterval(function() {
				socket.emit('reloadplayerlist', {});
			}, 5000);
			
		</script>  
	</head>
  <body> 
  	<h1>Jogo da Velha Multiplayer</h1>
	from: <a href="http://www.mosampaio.com.br/">http://www.mosampaio.com.br</a>
	 -- 
	<div id="players" style="display:none">
	 	<h2>Jogadores Online</h2>
   		<div id="playerlist">
   		</div>
   	</div>
   		<hr/>
   		<div id="loginform">
	   		<label>Usuário</label>
			<input name="username" id="username" type="text"/>
			<label>Senha</label>
			<input name="password" id="password" type="password"/>
	   		<a href="#" id="login" onclick="return login()">Login</a>
	   	</div>
	   	<br/>
   		<a href="register">Cadastre-se</a>
 </body>
 </html>